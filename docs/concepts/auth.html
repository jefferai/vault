<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Before performing any operation with Vault, the connecting client must be authenticated.">

    <link rel="shortcut icon" href="/assets/images/favicon.png">

    <title>Authentication - Vault by HashiCorp</title>

    <link href="/assets/stylesheets/application-4b1f25b3.css" rel="stylesheet"/>

    <!--[if lt IE 9]><script src="/assets/javascripts/html5shiv-62fced3a.js" type="text/javascript"></script><script src="/assets/javascripts/respond.min-88c91176.js" type="text/javascript"></script><![endif]-->

    
  </head>

  <body id="page-Authentication" class="page-Authentication layout-docs page-sub">

<div id="header" class="navbar-static-top">
	<div class="container">
        <div class="row">
            <div class="col-md-offset-1 col-md-10 col-xs-12">
                <div class="navbar-header">
                    <div class="navbar-brand">
                         <a class="logo" href="">Vault</a>
                    </div>
                    <ul class="main-links nav navbar-nav navbar-right hidden-xs">
                        <li class="first li-under"><a href="intro/index.html">Intro</a></li>
                        <li class="li-under"><a href="docs/index.html">Docs</a></li>
                        <li class="li-under"><a href="community.html">Community</a></li>
                    </ul>
                    <button class="navbar-toggle" type="button">
                       <span class="sr-only">Toggle navigation</span>
                       <span class="icon-bar"></span>
                       <span class="icon-bar"></span>
                       <span class="icon-bar"></span>
                    </button>                       
                </div>
                <div class="buttons hidden-xs">
            		<nav role="navigation">
            			<ul class="nav navbar-nav navbar-right">
            				<li class="first"><a href="downloads.html">Download</a></li>
            				<li class=""><a href="https://github.com/hashicorp/vault">GitHub</a></li>
            			</ul>
            		</nav>
                </div>
            </div>         
        </div>
    </div>
</div>


<div class="container">
	<div class="row">
		<div class="col-md-offset-1 col-md-2 col-sm-3 col-xs-12">
					<div class="docs-sidebar hidden-print affix-top" role="complementary">
			<ul class="nav docs-sidenav">
				<li>
					<a href="docs/index.html">Documentation Home</a>
				</li>

				<li>
					<a href="docs/internals/index.html">Internals</a>
					<ul class="nav">
						<li>
							<a href="docs/internals/architecture.html">Architecture</a>
                        </li>

						<li>
							<a href="docs/internals/high-availability.html">High Availability</a>
						</li>

						<li>
							<a href="docs/internals/security.html">Security Model</a>
                        </li>

						<li>
							<a href="docs/internals/telemetry.html">Telemetry</a>
                        </li>

						<li>
							<a href="docs/internals/token.html">Token Authentication</a>
						</li>
					</ul>
				</li>

				<li>
					<a href="docs/install/index.html">Installation</a>
				</li>

				<li class="active">
					<a href="docs/concepts/index.html">Basic Concepts</a>
					<ul class="nav">
						<li>
							<a href="docs/concepts/dev-server.html">"Dev" Server</a>
						</li>

						<li>
							<a href="docs/concepts/seal.html">Seal/Unseal</a>
						</li>

						<li>
							<a href="docs/concepts/lease.html">Lease, Renew, and Revoke</a>
						</li>

						<li class="active">
							<a href="docs/concepts/auth.html">Authentication</a>
						</li>

						<li>
							<a href="docs/concepts/tokens.html">Tokens</a>
						</li>

						<li>
							<a href="docs/concepts/policies.html">Access Control Policies</a>
						</li>

						<li>
							<a href="docs/concepts/ha.html">High Availability</a>
						</li>
					</ul>
				</li>

				<li>
					<a href="docs/config/index.html">Configuration</a>
				</li>

				<li>
					<a href="docs/commands/index.html">Commands (CLI)</a>
					<ul class="nav">
						<li>
							<a href="docs/commands/help.html">Help</a>
						</li>

						<li>
							<a href="docs/commands/read-write.html">Reading and Writing Data</a>
						</li>
					</ul>
				</li>

				<li>
					<a href="docs/http/index.html">HTTP API</a>
				</li>

				<hr>

				<li>
					<a href="docs/secrets/index.html">Secret Backends</a>
					<ul class="nav">
						<li>
							<a href="docs/secrets/aws/index.html">AWS</a>
						</li>

						<li>
							<a href="docs/secrets/consul/index.html">Consul</a>
						</li>

						<li>
							<a href="docs/secrets/pki/index.html">PKI (Certificates)</a>
                        </li>

						<li>
							<a href="docs/secrets/postgresql/index.html">PostgreSQL</a>
                        </li>

						<li>
							<a href="docs/secrets/mysql/index.html">MySQL</a>
						</li>

						<li>
							<a href="docs/secrets/transit/index.html">Transit</a>
						</li>

						<li>
							<a href="docs/secrets/generic/index.html">Generic</a>
						</li>

						<li>
							<a href="docs/secrets/custom.html">Custom</a>
						</li>
					</ul>
				</li>

				<li>
					<a href="docs/auth/index.html">Auth Backends</a>
					<ul class="nav">
						<li>
                            <a href="docs/auth/token.html">Tokens</a>
						</li>

						<li>
							<a href="docs/auth/github.html">GitHub</a>
						</li>

						<li>
							<a href="docs/auth/app-id.html">App ID</a>
						</li>

						<li>
							<a href="docs/auth/userpass.html">Username &amp; Password</a>
                        </li>

						<li>
							<a href="docs/auth/cert.html">TLS Certificates</a>
                        </li>

						<li>
							<a href="docs/auth/ldap.html">LDAP</a>
						</li>
					</ul>
				</li>

				<li>
					<a href="docs/audit/index.html">Audit Backends</a>
					<ul class="nav">
						<li>
							<a href="docs/audit/file.html">File</a>
                        </li>

						<li>
							<a href="docs/audit/syslog.html">Syslog</a>
						</li>
					</ul>
				</li>
			</ul>
		</div>

		</div>  
		<div id="main-content" class="col-sm-9 col-md-8 col-xs-12" role="main">
			<div class="bs-docs-section">
				
	<h1>Authentication</h1>
<p>Before performing any operation with Vault, the connecting client must be
<em>authenticated</em>. Authentication is the process of verifying a person or
machine is who they say they are and assigning an identity to them. This
identity is then used when making requests with Vault.</p>
<p>Authentication in Vault is pluggable via authentication backends. This
allows you to authenticate with Vault using a method that works best for your
organization. For example, you can authenticate using GitHub, certs, etc.</p>

<h2>Authentication Backends</h2>
<p>There are many authentication backends available for Vault. They
are enabled using <code>vault auth-enable</code>. After they&#39;re enabled, you can
learn more about them using <code>vault help auth/&lt;name&gt;</code>. For example,
if you enable GitHub, you can use <code>vault help auth/github</code> to learn more
about how to configure it and login.</p>
<p>Multiple authentication backends can be enabled, but only one is required
to gain authentication. It is not currently possible to force a user through
multiple authentication backends to gain access.</p>
<p>This allows you to enable human-friendly as well as machine-friendly
backends at the same time. For example, for humans you might use the
&quot;github&quot; auth backend, and for machines you might use the &quot;app-id&quot; backend.</p>

<h2>Tokens</h2>
<p>There is an <a href="/docs/concepts/tokens.html">entire page dedicated to tokens</a>,
but it is important to understand that authentication works by verifying
your identity and then generating a token to associate with that identity.</p>
<p>For example, even though you may authenticate using something like GitHub,
Vault generates a unique access token for you to use for future requests.
The CLI automatically attaches this token to requests, but if you&#39;re using
the API you&#39;ll have to do this manually.</p>
<p>This token given for authentication with any backend can also be used
with the full set of token commands, such as creating new sub-tokens,
revoking tokens, and renewing tokens. This is all covered on the
<a href="/docs/concepts/tokens.html">token concepts page</a>.</p>

<h2>Authenticating</h2>

<h4>Via the CLI</h4>
<p>To authenticate with the CLI, <code>vault auth</code> is used. This supports many
of the built-in authentication methods. For example, with GitHub:</p>
<pre class="highlight plaintext"><code>$ vault auth -method=github token=&lt;token&gt;
...
</code></pre>
<p>After authenticating, you will be logged in. The CLI command will also
output your raw token. This token is used for revocation and renewal.
As the user logging in, the primary use case of the token is renewal,
covered below in the &quot;Auth Leases&quot; section.</p>
<p>To determine what variables are needed for an authentication method,
supply the <code>-method</code> flag without any additional arguments and help
will be shown.</p>
<p>If you&#39;re using a method that isn&#39;t supported via the CLI, then the API
must be used.</p>

<h4>Via the API</h4>
<p>API authentication is generally used for machine authentication. Each
auth backend implements is own login endpoint. Use the <code>vault help</code>
mechanism to find the proper endpoint.</p>
<p>For example, the GitHub login endpoint is located at <code>auth/github/login</code>.
And to determine the arguments needed, <code>vault help auth/github/login</code> can
be used.</p>

<h2>Auth Leases</h2>
<p>Just like secrets, identities have
<a href="/docs/concepts/lease.html">leases</a> associated with them. This means that
you must reauthenticate after the given lease period to continue accessing
Vault.</p>
<p>To set the lease associated with an identity, reference the help for
the specific authentication backend in use. It is specific to each backend
how leasing is implemented.</p>
<p>And just like secrets, identities can be renewed without having to
completely reauthenticate. Just use <code>vault token-renew &lt;token&gt;</code> with the
token associated with your identity to renew it.</p>


			</div>
		</div>
	</div>
</div>




<script type="text/x-handlebars" data-template-name="demo">
{{outlet}}
</script>

<script type="text/x-handlebars" data-template-name="demo/step">

<div class="instruction-wrapper">
    <div class="instruction">
        <p>
        <strong>{{model.humanName}}</strong>
        </p>

        {{partial model.instructionTemplate}}
    </div>
</div>

<span class="close-terminal" {{action "close"}}>X</span>

<div {{bind-attr class=":demo-terminal fullscreen:fullscreen" }}>
    <div class="log">{{renderedLogs}}</div>

    <form {{action "submitText" on="submit"}}>
        {{#unless isLoading}}${{/unless}} {{input value=currentText class="shell" spellcheck="false"}}
    </form>

    {{#if isLoading}}
    <div class="loading-bar"></div>
    {{/if}}
</div>
</script>

<script type="text/x-handlebars" data-template-name="welcome">
    <p>
        This tutorial is great for getting familiar with the command line
         interface to Vault. As soon as you opened this terminal, you connected to a real in-memory Vault server.
        Any commands you enter will work as they would with Vault normally, but leaving this page
        will end the session.
    </p>
    <p>
     Please note that this is running in a shared environment, so avoid setting any real secrets.
    </p>
    <p>
        <strong>Use the command "next" to move forward</strong>.
    </p>
    <p>This will work throughout
        the tutorial, along with "previous" to go back a step.
    </p>
</script>


<script type="text/x-handlebars" data-template-name="steps">
    <p>
        This tutorial will cover the following steps:
    </p>
    <ul>
        <li>- Initializing and unsealing your Vault</li>
        <li>- Authorizing your requests to Vault</li>
        <li>- Reading and writing secrets</li>
        <li>- Sealing your Vault</li>
    </ul>
    <p>
        <strong>Again, use "next" to move to the first step – initializing your Vault</strong>.
    </p>
</script>

<script type="text/x-handlebars" data-template-name="init">
    <p>
        To get started, we need to initialize an instance of Vault for you
        to work with.
    </p>
    <p>
        While initializing, you can configure the seal behavior
        of Vault.
        </p>
    <p>
        Initialize Vault now, with 1 unseal key for simplicity, using the command:
    </p>
    <p>
        <code>vault init -key-shares=1 -key-threshold=1</code>
    </p>
    <p>
        You'll notice Vault prints out several keys here. Don't clear your terminal,
        as these are needed in the next few steps.
    </p>
</script>

<script type="text/x-handlebars" data-template-name="unseal">
    <p>
        When a Vault server is started, it starts in a sealed state.
         In this state, Vault is configured to know where and how to access the
         physical storage, but doesn't know how to decrypt any of it.
    </p>
    <p>
        Vault encrypts data with an encryption key. This key is encrypted with the "master key", which
        isn't stored. Decrypting the master key requires a threshold of shards. In this example,
        we use one shard to decrypt this master key.
    </p>
    <p>
        Unseal the Vault:
    </p>
    <p>
        <code>vault unseal &lt;key 1&gt;</code>
    </p>
</script>

<script type="text/x-handlebars" data-template-name="auth">
    <p>
        Before performing any operation with Vault, the
        connecting client must be authenticated. Authentication is
        the process of verifying a person or machine is who they say
        they are and assigning an identity to them. This identity is then
        used when making requests with Vault.
    </p>
    <p>
        For simplicity, we'll use the root token we generated on init in Step 2. This
        output should be available in the scrollback.
    </p>
    <p>
        Authorize with a client token:
    </p>
    <p>
        <code>vault auth &lt;root token&gt;</code>
    </p>
</script>

<script type="text/x-handlebars" data-template-name="secrets">
    <p>
        Now that Vault has been set-up, we can start reading and writing secrets
        with the default mounted secret backend. Secrets written to Vault
        are encrypted and then written to the backend storage.
        The backend storage mechanism never sees the unencrypted
        value and doesn't have the means necessary to decrypt
        it without Vault.
    </p>
    <p>
        <code>vault write secret/hello value=world</code>
    </p>
    <p>
        Of course, you can then read this data too:
    </p>
    <p>
        <code>vault read secret/hello</code>
    </p>
</script>

<script type="text/x-handlebars" data-template-name="seal">
    <p>
        There is also an API to seal the Vault. This will throw
        away the encryption key and require another unseal process
        to restore it. Sealing only requires a single operator
        with root privileges. This is typically part of a rare "break glass
        procedure".
    </p>
    <p>
        This way, if there is a detected intrusion, the Vault data can be locked
        quickly to try to minimize damages. It can't be accessed again
        without access to the master key shards.
    </p>
    <p>
        <code>vault seal</code>
    </p>
</script>

<script type="text/x-handlebars" data-template-name="finish">
    <p>
        Thanks for trying out the Vault CLI. If you want to keep playing with
        commands, use "fu" to go fullscreen.
    </p>
    <p>
        Note that the Vault CLI uses the HTTP API, which gives you full access to Vault. Every aspect
        of Vault can be controlled via this API.
    </p>
    <p>
        We recommend reading through the <a href="intro/index.html">intro guide</a> next, which will
        provide more background information, use cases and examples.
    </p>
</script>

	<div id="footer">
		<div class="container">
			<div class="row">
				<div class="col-md-offset-1 col-md-5 col-sm-6 col-xs-12">
					<ul class="footer-links nav navbar-nav">
						<li class="li-under"><a href="intro/index.html">Intro</a></li>
						<li class="li-under"><a href="docs/index.html">Docs</a></li>
						<li class="li-under"><a href="community.html">Community</a></li>
						<li class="li-under"><a href="security.html">Security</a></li>
					</ul>
				</div>
				<div class="footer-hashi col-md-5 col-sm-6 col-xs-12">
					<div class="pull-right">
						<span>A <a href="https://www.hashicorp.com">HashiCorp</a> Project.</span>
						<a class="hashi-logo" href="https://www.hashicorp.com"><i class="hashi-logo"></i></a>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-62364009-1', 'auto');
  ga('send', 'pageview');
</script>

<script src="/assets/javascripts/application-e782a4a8.js" type="text/javascript"></script>

</body>
</html>